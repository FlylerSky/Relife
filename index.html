<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Relife</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/quill@2.0.2/dist/quill.snow.css" rel="stylesheet">

  <!-- Local extracted CSS -->
  <link href="CSS/index.css" rel="stylesheet">
</head>
<body>

<nav class="navbar bg-white shadow-sm py-2">
  <div class="container d-flex align-items-center justify-content-between position-relative">
    <div class="fw-bold">Relife</div>

    <div class="search-box position-relative mx-2 w-100">
      <div class="search-row">
        <i class="bi bi-search small-muted ms-2"></i>
        <input id="searchInput" class="form-control form-control-sm border-0" placeholder="Tìm: bài, người, hashtag..." aria-label="search">
      </div>
      <div id="searchResults" class="search-results"></div>
    </div>

    <button class="btn btn-light btn-sm" data-bs-toggle="offcanvas" data-bs-target="#menuCanvas">
      <i class="bi bi-list fs-4"></i>
    </button>
  </div>
</nav>

<div class="offcanvas offcanvas-end" tabindex="-1" id="menuCanvas">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title">Menu</h5>
    <button class="btn-close" data-bs-dismiss="offcanvas"></button>
  </div>
  <div class="offcanvas-body">
    <div id="menuAuthArea" class="mb-3"></div>

    <a href="tag.html" class="btn btn-outline-secondary btn-rounded w-100 mb-2">
      <i class="bi bi-hash"></i> Hashtag Topic
    </a>

    <button id="btnOpenNewPost" class="btn btn-primary btn-rounded w-100 mb-3" data-bs-toggle="modal" data-bs-target="#newPostModal">
      <i class="bi bi-plus-lg"></i> Đăng bài
    </button>

    <hr>
    <div class="small-muted">Bài viết cũ chưa có user sẽ mang nhãn <span class="badge-trial">Tài khoản thử nghiệm</span>.
    <br /> <br /><hr />Tên phiên bản: <span class="badge-trial">V1.2</span> (PHIÊN BẢN CHÍNH THỨC)<br />Mã phiên bản: <span class="badge-trial">social_1.1.2.300925</span><hr />
    <span class="badge-trial">Nội dung update: Gỡ lỗi hiển thị bình luận bị trồi ra ngoài, thêm trình xem ảnh, thêm bo góc cho các phần tử video- ảnh</span>
    </div>
  </div>
</div>

<div class="container my-3">
  <div id="feed" class="d-grid gap-3"></div>
</div>

<!-- New Post Modal -->
<div class="modal fade" id="newPostModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <form id="newPostForm" class="modal-content">
      <div class="modal-header"><h5 class="modal-title">Viết bài mới</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div>
      <div class="modal-body">
        <div id="newPostUserInfo" class="mb-2"></div>
        <input id="postTitle" class="form-control mb-2" placeholder="Tiêu đề" required>
        <div id="editor"></div>
        <input id="postHashtags" class="form-control mt-2" placeholder="#hashtag, #khác">
      </div>
      <div class="modal-footer"><button type="button" class="btn btn-secondary btn-rounded" data-bs-dismiss="modal">Hủy</button><button type="submit" class="btn btn-primary btn-rounded">Đăng</button></div>
    </form>
  </div>
</div>

<!-- Comments Modal -->
<div class="modal fade" id="commentsModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-scrollable modal-lg">
    <div class="modal-content">
      <div class="modal-header"><h6 id="commentsModalTitle">Bình luận</h6><button class="btn-close" data-bs-dismiss="modal"></button></div>
      <div class="modal-body">
        <div id="commentsList" class="mb-3"></div>
        <div id="mustLoginToComment" class="alert alert-warning" style="display:none;">Bạn cần <a href="#" id="openLoginFromComment">Đăng nhập</a> để bình luận.</div>
        <div id="commentBoxArea" style="display:none;">
          <div id="commenterInfo" class="mb-2"></div>
          <textarea id="commentText" class="form-control mb-2" rows="3" placeholder="Viết bình luận..."></textarea>
          <div class="d-flex justify-content-end"><button id="postCommentBtn" class="btn btn-primary btn-rounded">Gửi bình luận</button></div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Register Modal -->
<div class="modal fade" id="registerModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <form id="registerForm" class="modal-content">
      <div class="modal-header"><h5 class="modal-title">Đăng ký</h5><button class="btn-close" data-bs-dismiss="modal"></button></div>
      <div class="modal-body">
        <input id="regFullName" class="form-control mb-2" placeholder="Họ & tên thật" required>
        <input id="regDisplayName" class="form-control mb-2" placeholder="Tên hiển thị (public)" required>
        <input id="regTagName" class="form-control mb-2" placeholder='Tag Name Search (ví dụ: @lan123) - duy nhất' required>
        <select id="regGender" class="form-select mb-2">
          <option value="">Giới tính</option><option value="female">Nữ</option><option value="male">Nam</option><option value="other">Khác</option>
        </select>
        <input id="regBirthday" type="date" class="form-control mb-2">
        <input id="regCountry" class="form-control mb-2" placeholder="Quốc gia">
        <input id="regEmail" type="email" class="form-control mb-2" placeholder="Email" required>
        <input id="regPassword" type="password" class="form-control mb-2" placeholder="Mật khẩu (>=6 ký tự)" required>
        <div class="form-text small-muted">Sau đăng ký, admin sẽ gửi mã kích hoạt vào email sau một khoảng thời gian trên 24 giờ.</div>
      </div>
      <div class="modal-footer"><button type="button" class="btn btn-secondary btn-rounded" data-bs-dismiss="modal">Hủy</button><button type="submit" class="btn btn-primary btn-rounded">Đăng ký</button></div>
    </form>
  </div>
</div>

<!-- Login Modal -->
<div class="modal fade" id="loginModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <form id="loginForm" class="modal-content">
      <div class="modal-header"><h5 class="modal-title">Đăng nhập</h5><button class="btn-close" data-bs-dismiss="modal"></button></div>
      <div class="modal-body">
        <input id="loginEmail" type="email" class="form-control mb-2" placeholder="Email" required>
        <input id="loginPassword" type="password" class="form-control mb-2" placeholder="Mật khẩu" required>
        <div id="activateBlock" style="display:none;">
          <hr>
          <div class="form-text mb-2">Tài khoản chưa kích hoạt. Nhập mã kích hoạt do admin gửi:</div>
          <input id="activationCode" class="form-control mb-2" placeholder="Mã kích hoạt">
          <div id="activateHelp" class="form-text small-muted"></div>
        </div>
      </div>
      <div class="modal-footer"><button type="button" class="btn btn-secondary btn-rounded" data-bs-dismiss="modal">Hủy</button><button type="submit" class="btn btn-primary btn-rounded">Đăng nhập</button></div>
    </form>
  </div>
</div>

<!-- Libraries (kept non-module to expose globals) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/quill@2.0.2/dist/quill.min.js"></script>

<!-- Module script (extracted JS) -->
<script type="module" src="JS/index.js"></script>

</body>
</html>
